name: CIS Compliance

on:
  schedule:
    - cron: '0 10 * * 6'  # Saturday 10am UTC
  workflow_dispatch:
    inputs:
      repos:
        description: 'Specific repos to scan (comma-separated, empty=all)'
        type: string
        default: ''
      max_repos:
        description: 'Maximum number of repos to scan'
        type: number
        default: 100

permissions:
  contents: read
  issues: write

jobs:
  cis:
    uses: PavelGuzenfeld/standard/.github/workflows/cis-org-compliance.yml@main
    permissions:
      contents: read
      issues: write
    with:
      org: PavelGuzenfeld
      repos: ${{ inputs.repos || '' }}
      max_repos: ${{ inputs.max_repos || 100 }}
      create_tracking_issue: true
    secrets:
      scan_token: ${{ secrets.COMPLIANCE_BOT_TOKEN }}
